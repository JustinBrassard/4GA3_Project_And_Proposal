library(readr)
library(spatstat)
library(maptools)
library(dplyr)
rm(list = ls())
library(leaflet.extras)
library(sp)
library(leaflet)
library(tidyverse)
library(gstat)
library(sf)
library(readr)
library(spatstat)
library(maptools)
library(dplyr)
#importing necessary files from GitHub
collisionsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Motor%20Vehicle%20Collisions%20with%20KSI%20Data%20True.csv?token=AS22SR2ZGZO34O7CM56XBFTANDP44"
fullcollisionsfile = "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Full_Collisions.csv"
zonesfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Stationary%20Sign%20locations/Stationary%20Sign%20Locations%20True%20-%20Stationary%20Sign%20locations.csv?token=AS22SR3YXJ3MMPTFKRTZFIDANDQKW"
schoolsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/point-school-locations-wgs84/School%20Locations%20True%20-%20School%20locations-all%20types%20data.csv?token=AS22SR3J4NEF54PS3OOARYTANDQOY"
boundsfile <- "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Toronto%20Boundary%20Points%20UTM15N/Toronto_Points.csv"
Motor_Vehicle_Collisions_with_KSI_Data_True<-read_csv(url(collisionsfile))
Full_Collisions<-read_csv(url(fullcollisionsfile))
Stationary_Sign_Locations_True<-read_csv(url(zonesfile))
School_Locations_True<-read_csv(url(schoolsfile))
Toronto_Points<-read_csv(url(boundsfile))
#separation of 'geometry' column into two lng & lat columns for main data sets
School_Zones <- Stationary_Sign_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Collisions <- Motor_Vehicle_Collisions_with_KSI_Data_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Schools <- School_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Full_Collisions <- Full_Collisions %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
rm(list = ls())
library(leaflet.extras)
library(sp)
library(leaflet)
library(tidyverse)
library(gstat)
library(sf)
library(readr)
library(spatstat)
library(maptools)
library(dplyr)
#importing necessary files from GitHub
collisionsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Motor%20Vehicle%20Collisions%20with%20KSI%20Data%20True.csv?token=AS22SR2ZGZO34O7CM56XBFTANDP44"
fullcollisionsfile = "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Full_Collisions.csv"
zonesfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Stationary%20Sign%20locations/Stationary%20Sign%20Locations%20True%20-%20Stationary%20Sign%20locations.csv?token=AS22SR3YXJ3MMPTFKRTZFIDANDQKW"
schoolsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/point-school-locations-wgs84/School%20Locations%20True%20-%20School%20locations-all%20types%20data.csv?token=AS22SR3J4NEF54PS3OOARYTANDQOY"
boundsfile <- "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Toronto%20Boundary%20Points%20UTM15N/Toronto_Points.csv"
Motor_Vehicle_Collisions_with_KSI_Data_True<-read_csv(url(collisionsfile))
Full_Collisions<-read_csv(url(fullcollisionsfile))
Stationary_Sign_Locations_True<-read_csv(url(zonesfile))
School_Locations_True<-read_csv(url(schoolsfile))
Toronto_Points<-read_csv(url(boundsfile))
#separation of 'geometry' column into two lng & lat columns for main data sets
School_Zones <- Stationary_Sign_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Collisions <- Motor_Vehicle_Collisions_with_KSI_Data_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Schools <- School_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Full_Collisions <- Full_Collisions %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
#df to sf conversion of main data sets
School_Zones.sf <- st_as_sf(School_Zones, coords = c("lng", "lat"))
Collisions.sf <- st_as_sf(Collisions, coords = c("lng", "lat"))
Schools.sf <- st_as_sf(Schools, coords = c("lng", "lat"))
#icon creation for main leaflet (TEST)
schoolIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/school-house-icon-16.png",
iconWidth = 30, iconHeight = 30
)
zonesIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/school-icon-png-40.png",
iconWidth = 10, iconHeight = 10
)
collisionsIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/-alert-attention-danger-exclamation-safety-warning-icon--icon--33.png",
iconWidth = 30, iconHeight = 30
)
#Main data sets leaflet (TEST)
overview.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon) %>%
addMarkers(data = Schools.sf, icon = schoolIcon)
overview.map
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 13) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
library(leaflet.extras)
library(sp)
library(leaflet)
library(tidyverse)
library(gstat)
library(sf)
library(readr)
library(spatstat)
library(maptools)
library(dplyr)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 15) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 15) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
rm(list = ls())
library(leaflet.extras)
library(sp)
library(leaflet)
library(tidyverse)
library(gstat)
library(sf)
library(readr)
library(spatstat)
library(maptools)
library(dplyr)
#importing necessary files from GitHub
collisionsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Motor%20Vehicle%20Collisions%20with%20KSI%20Data%20True.csv?token=AS22SR2ZGZO34O7CM56XBFTANDP44"
fullcollisionsfile = "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Full_Collisions.csv"
zonesfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Stationary%20Sign%20locations/Stationary%20Sign%20Locations%20True%20-%20Stationary%20Sign%20locations.csv?token=AS22SR3YXJ3MMPTFKRTZFIDANDQKW"
schoolsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/point-school-locations-wgs84/School%20Locations%20True%20-%20School%20locations-all%20types%20data.csv?token=AS22SR3J4NEF54PS3OOARYTANDQOY"
boundsfile <- "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Toronto%20Boundary%20Points%20UTM15N/Toronto_Points.csv"
Motor_Vehicle_Collisions_with_KSI_Data_True<-read_csv(url(collisionsfile))
Full_Collisions<-read_csv(url(fullcollisionsfile))
Stationary_Sign_Locations_True<-read_csv(url(zonesfile))
School_Locations_True<-read_csv(url(schoolsfile))
Toronto_Points<-read_csv(url(boundsfile))
#separation of 'geometry' column into two lng & lat columns for main data sets
School_Zones <- Stationary_Sign_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Collisions <- Motor_Vehicle_Collisions_with_KSI_Data_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Schools <- School_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Full_Collisions <- Full_Collisions %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
#df to sf conversion of main data sets
School_Zones.sf <- st_as_sf(School_Zones, coords = c("lng", "lat"))
Collisions.sf <- st_as_sf(Collisions, coords = c("lng", "lat"))
Schools.sf <- st_as_sf(Schools, coords = c("lng", "lat"))
#icon creation for main leaflet (TEST)
schoolIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/school-house-icon-16.png",
iconWidth = 30, iconHeight = 30
)
zonesIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/school-icon-png-40.png",
iconWidth = 10, iconHeight = 10
)
collisionsIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/-alert-attention-danger-exclamation-safety-warning-icon--icon--33.png",
iconWidth = 30, iconHeight = 30
)
#leaflet map containing the point locations of 2019 collisions
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
#creation of 2019 collisions heatmap
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
#setting necessary coords as numeric values
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
#2019 collisions heatmap (will add necessary map elements like a title soon)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
#leaflet map containing the point locations of 2019 collisions
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
#setting necessary coords as numeric values
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
#creation of 2019 collisions heatmap
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
#2019 collisions heatmap (will add necessary map elements like a title soon)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
#2019 collisions heatmap with school zone markers (will add necessary map elements like a title soon)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
#2006 – 2019 collisions heatmap with school zone markers (will add necessary map elements like a title soon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
rm(list = ls())
library(leaflet.extras)
library(sp)
library(leaflet)
library(tidyverse)
library(gstat)
library(sf)
library(readr)
library(spatstat)
library(maptools)
library(dplyr)
#importing necessary files from GitHub
collisionsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Motor%20Vehicle%20Collisions%20with%20KSI%20Data%20True.csv?token=AS22SR2ZGZO34O7CM56XBFTANDP44"
fullcollisionsfile = "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Full_Collisions.csv"
zonesfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Stationary%20Sign%20locations/Stationary%20Sign%20Locations%20True%20-%20Stationary%20Sign%20locations.csv?token=AS22SR3YXJ3MMPTFKRTZFIDANDQKW"
schoolsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/point-school-locations-wgs84/School%20Locations%20True%20-%20School%20locations-all%20types%20data.csv?token=AS22SR3J4NEF54PS3OOARYTANDQOY"
boundsfile <- "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Toronto%20Boundary%20Points%20UTM15N/Toronto_Points.csv"
Motor_Vehicle_Collisions_with_KSI_Data_True<-read_csv(url(collisionsfile))
Full_Collisions<-read_csv(url(fullcollisionsfile))
Stationary_Sign_Locations_True<-read_csv(url(zonesfile))
School_Locations_True<-read_csv(url(schoolsfile))
Toronto_Points<-read_csv(url(boundsfile))
#separation of 'geometry' column into two lng & lat columns for main data sets
School_Zones <- Stationary_Sign_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Collisions <- Motor_Vehicle_Collisions_with_KSI_Data_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Schools <- School_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Full_Collisions <- Full_Collisions %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
#df to sf conversion of main data sets
School_Zones.sf <- st_as_sf(School_Zones, coords = c("lng", "lat"))
Collisions.sf <- st_as_sf(Collisions, coords = c("lng", "lat"))
Schools.sf <- st_as_sf(Schools, coords = c("lng", "lat"))
#icon creation for main leaflet (TEST)
schoolIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/school-house-icon-16.png",
iconWidth = 30, iconHeight = 30
)
zonesIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/school-icon-png-40.png",
iconWidth = 10, iconHeight = 10
)
collisionsIcon <- makeIcon(
iconUrl = "https://www.freeiconspng.com/uploads/-alert-attention-danger-exclamation-safety-warning-icon--icon--33.png",
iconWidth = 30, iconHeight = 30
)
#leaflet map containing the point locations of 2019 collisions
collisions.map <- leaflet() %>% addTiles() %>%
addMarkers(data = Collisions.sf, icon = collisionsIcon)
collisions.map
#setting necessary coords as numeric values
Collisions$lng <- as.numeric(Collisions$lng)
Collisions$lat <- as.numeric(Collisions$lat)
Full_Collisions$lng <- as.numeric(Full_Collisions$lng)
Full_Collisions$lat <- as.numeric(Full_Collisions$lat)
#creation of 2019 collisions heatmap
collisions.hmap <- leaflet(data = Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
#2019 collisions heatmap (will add necessary map elements like a title soon)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 17)
#2019 collisions heatmap with school zone markers (will add necessary map elements like a title soon)
collisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
#2006 – 2019 collisions heatmap with school zone markers (will add necessary map elements like a title soon)
fullcollisions.hmap <- leaflet(data = Full_Collisions) %>%
setView(lng = -79.3, lat = 43.65, zoom = 10) %>%
addTiles()
fullcollisions.hmap %>% addHeatmap(lng = ~lng, lat = ~lat, intensity = 1,
blur = 40, max = 1, radius = 16) %>%
addMarkers(data = School_Zones.sf, icon = zonesIcon)
rm(list = ls())
library(leaflet.extras)
library(sp)
library(leaflet)
library(tidyverse)
library(gstat)
library(sf)
library(readr)
library(spatstat)
library(maptools)
library(dplyr)
#importing necessary files from GitHub
collisionsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Motor%20Vehicle%20Collisions%20with%20KSI%20Data%20True.csv?token=AS22SR2ZGZO34O7CM56XBFTANDP44"
fullcollisionsfile = "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Motor%20Vehicle%20Collisions/Full_Collisions.csv"
zonesfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Stationary%20Sign%20locations/Stationary%20Sign%20Locations%20True%20-%20Stationary%20Sign%20locations.csv?token=AS22SR3YXJ3MMPTFKRTZFIDANDQKW"
schoolsfile="https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/point-school-locations-wgs84/School%20Locations%20True%20-%20School%20locations-all%20types%20data.csv?token=AS22SR3J4NEF54PS3OOARYTANDQOY"
boundsfile <- "https://raw.githubusercontent.com/JustinBrassard/4GA3_Project_And_Proposal/main/data/Toronto%20Boundary%20Points%20UTM15N/Toronto_Points.csv"
Motor_Vehicle_Collisions_with_KSI_Data_True<-read_csv(url(collisionsfile))
Full_Collisions<-read_csv(url(fullcollisionsfile))
Stationary_Sign_Locations_True<-read_csv(url(zonesfile))
School_Locations_True<-read_csv(url(schoolsfile))
Toronto_Points<-read_csv(url(boundsfile))
#separation of 'geometry' column into two lng & lat columns for main data sets
School_Zones <- Stationary_Sign_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Collisions <- Motor_Vehicle_Collisions_with_KSI_Data_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Schools <- School_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Full_Collisions <- Full_Collisions %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
#df to sf conversion of main data sets
School_Zones.sf <- st_as_sf(School_Zones, coords = c("lng", "lat"))
Collisions.sf <- st_as_sf(Collisions, coords = c("lng", "lat"))
Schools.sf <- st_as_sf(Schools, coords = c("lng", "lat"))
#separation of 'geometry' column into two lng & lat columns for main data sets
School_Zones <- Stationary_Sign_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Collisions <- Motor_Vehicle_Collisions_with_KSI_Data_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Schools <- School_Locations_True %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
Full_Collisions <- Full_Collisions %>%
separate(geometry, into = c('lng', 'lat'), sep = ', ')
